
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mini ReqBin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; padding: 1em; max-width: 600px; margin: auto; }
    textarea, input, select, button { width: 100%; margin: 6px 0; padding: 8px; }
    .headers-list { margin-bottom: 10px; }
    .header-pair { display: flex; gap: 5px; margin-bottom: 5px; }
    .header-pair input { flex: 1; }
    pre { background: #eee; padding: 10px; white-space: pre-wrap; word-wrap: break-word; }
  </style>

<style>
    #responseBox {
        white-space: pre-wrap;
        background-color: #1e1e1e;
        color: #d4d4d4;
        font-family: monospace;
        padding: 10px;
        border: 1px solid #444;
        border-radius: 8px;
        overflow-x: auto;
        min-height: 300px;
    }
    .highlight-header {
        color: violet;
        font-weight: bold;
    }
</style>

</head>
<body>
  <h2>üõ∞Ô∏è Mini ReqBin</h2>

  <label>Request URL:</label>
  <input id="url" placeholder="https://target.com/api">

  <label>Method:</label>
  <select id="method">
    <option>GET</option>
    <option>POST</option>
    <option>PUT</option>
    <option>DELETE</option>
    <option>OPTIONS</option>
    <option>PATCH</option>
  </select>

  <label>Request Body Type:</label>
  <select id="bodyType">
    <option value="">(None)</option>
    <option value="json">JSON</option>
    <option value="form">Form (x-www-form-urlencoded)</option>
    <option value="raw">Raw</option>
  </select>

  <label>Body:</label>
  <textarea id="body" rows="4" placeholder="Raw body or JSON here"></textarea>

  <label>Custom Headers:</label>
  <div id="headers" class="headers-list"></div>
  <button onclick="addHeader()">+ Add Header</button>

  <button onclick="sendRequest()">üöÄ Send</button>

  <h3>Response Headers:</h3>
  <pre id="resHeaders"></pre>

  <h3>Response Body:</h3>
  <pre id="resBody"></pre>

<script>
  function addHeader() {
    const div = document.createElement('div');
    div.className = 'header-pair';
    div.innerHTML = '<input placeholder="Header Name"><input placeholder="Header Value">';
    document.getElementById('headers').appendChild(div);
  }

  async function sendRequest() {
    const url = document.getElementById('url').value;
    const method = document.getElementById('method').value;
    const bodyType = document.getElementById('bodyType').value;
    const body = document.getElementById('body').value;

    let headers = {};
    document.querySelectorAll('.header-pair').forEach(div => {
      const [key, val] = div.querySelectorAll('input');
      if (key.value) headers[key.value] = val.value;
    });

    const payload = {
      url,
      method,
      headers,
      body,
      bodyType
    };

    const res = await fetch('proxy.php', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(payload)
    });

    const text = await res.text();
    try {
      const json = JSON.parse(text);
      document.getElementById('resHeaders').textContent = json.headers || '(none)';
      document.getElementById('resBody').textContent = json.body || '(no body)';
    } catch (e) {
      document.getElementById('resBody').textContent = text;
    }
  }
</script>
</body>
</html>
